function UrlReplace(){var docUrl=document.URL,ver=getUrlVars(docUrl).ver,matchVer=getUrlVars(docUrl).matchVer;if(null!=ver&&"latest"!=ver){var tempVer=findNearestVersion(ver);if(tempVer!=ver){var replaceUrl=docUrl.replace(ver,tempVer);window.location.replace(replaceUrl)}}null==matchVer&&null!=ver&&RedirToGivenVersionPage(ver),null==ver&&(docUrl.indexOf("?")>0?window.location.replace(docUrl+"&&ver=latest"):window.location.replace(docUrl+"?ver=latest"))}function allHerfClick(_this,ver){return addParam(_this,ver),!1}function RedirToGivenVersionPage(inputVer){var curVerTag=$(".currentVersion "),bestVerIndex=-1,verDiff=-1,curVer=null,bestVersion=null;if(null!=curVerTag){var verText=curVerTag[0].innerHTML.toLowerCase();if((curVer="latest version"==verText?"latest":verText.replace("version ",""))==inputVer)return;bestVerIndex=-1,verDiff=GetVersionDiff(inputVer,curVer),bestVersion=curVer}var anchorVal="",curDocUrl=document.URL;if(-1!=curDocUrl.indexOf("#")){var urlAry=curDocUrl.split("#");2==urlAry.length&&(anchorVal="#"+urlAry[1])}var changeVer="",ifChangeVersion;null!=getUrlVars(document.URL).cVer&&(changeVer="&&cVer=true");var historyList=$(".otherVersions"),aTag,exp;if(null!=historyList)for(var listAry=historyList[0].getElementsByTagName("li"),i=0;i<listAry.length;i++){var tmpVerText=listAry[i].innerText,tmpVer=null;if((tmpVer="latest version"==tmpVerText?"latest":tmpVerText.replace("version ",""))==inputVer){var aTag,exp;if((aTag=$(listAry[i]).children("a")).length>0)return null!=(exp=new RegExp(/[?]+([^=]+)=/gi)).exec(aTag[0].href)?void window.location.replace(aTag[0].href+"&&ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal):void(null!=getUrlVars(document.URL).src?window.location.replace(aTag[0].href+"?src="+getUrlVars(document.URL).src+"&&ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal):window.location.replace(aTag[0].href+"?ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal))}else{var tmpDiff=GetVersionDiff(inputVer,tmpVer);tmpDiff>=0&&(tmpDiff<verDiff||verDiff<0)&&(bestVerIndex=i,verDiff=tmpDiff,bestVersion=tmpVer)}}if(bestVerIndex>=0&&(aTag=$(listAry[bestVerIndex]).children("a")).length>0)return null!=(exp=new RegExp(/[?]+([^=]+)=/gi)).exec(aTag[0].href)?void window.location.replace(aTag[0].href+"&&ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal):void(null!=getUrlVars(document.URL).src?window.location.replace(aTag[0].href+"?src="+getUrlVars(document.URL).src+"&&ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal):window.location.replace(aTag[0].href+"?ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal))}function GetVersionDiff(inputVer,compareVer){if("latest"==compareVer)return 100;if(compareVer<inputVer)return-1;for(var inputChar=inputVer.split("."),compareChar=compareVer.split("."),diff=0,maxLength=Math.max(inputChar.length,compareChar.length),curWeight=1,i=0;i<maxLength;i++){var tmpInput=i<inputChar.length?inputChar[i]:0;if(isNaN(tmpInput)){diff+=curWeight;break}var tmpCompare=i<compareChar.length?compareChar[i]:0;if(isNaN(tmpCompare)){diff+=curWeight;break}var tmpDiff=tmpCompare-tmpInput;tmpDiff>=0?diff+=(curWeight/=10)*tmpDiff:(diff-=curWeight,diff+=(curWeight/=10)*(tmpDiff+10))}return diff}function addParam(aTag,verText,fromSourse=null,needh3=!1){var hrefVal=aTag.href,changeHref=hrefVal;if(""!=hrefVal){var exp=new RegExp(/[?&]ver=[^&^#]+/gi);if(null!=exp.exec(hrefVal))changeHref=hrefVal;else{var verStr="";if(verStr=null!=(exp=new RegExp(/[?]+([^=]+)=/gi)).exec(hrefVal)?"&&ver="+verText:"?ver="+verText,-1!=hrefVal.indexOf("#")){var urlAry=hrefVal.split("#");2==urlAry.length&&(changeHref=urlAry[0]+verStr+"#"+urlAry[1])}else changeHref=hrefVal+verStr}"sidebar"==fromSourse?$(aTag).hasClass("activeLink")||RequestNewPage(aTag,changeHref,needh3):"docContainer"==fromSourse?(console.log(fromSourse,aTag.target),"_blank"==aTag.target?window.open(changeHref):(console.log(aTag,changeHref,needh3),findCurLinkOnFullTree(aTag,changeHref,needh3))):"_blank"==aTag.target?window.open(changeHref):window.location.href=changeHref}}function RequestNewPage(aTag,paramLink,needh3=!1,redirectUrl=null){$("#articleContent").addClass("hidden"),$("#loadingContent").show();var fetchUrl=redirectUrl||aTag.href;fetch(fetchUrl).then((function(response){return response.text()})).then((function(data){var inputVer=getUrlVars(paramLink).ver,otherVersions=$(data).find(".otherVersions > li"),script;if("latest"==inputVer||null==inputVer||0==otherVersions.length||redirectUrl){document.title=$(data)[1].innerText,history.replaceState(null,null,paramLink);for(var i=0;i<$("#fullTreeMenuListContainer .activeLink").parents("li").length;i++){var obj=$("#fullTreeMenuListContainer .activeLink").parents("li")[i];$(obj).hasClass("hasActiveLinkList")&&$(obj).removeClass("hasActiveLinkList")}$("#fullTreeMenuListContainer .activeLink").removeClass("activeLink"),$(aTag).addClass("activeLink"),$(aTag).parents("li.collapseListStyle").length>0&&($(aTag).parents("li.collapseListStyle").addClass("expandListStyle").removeClass("collapseListStyle"),$(aTag).parents("li.expandListStyle").find(" > ul").slideDown()),$(aTag).parents("li.expandListStyle").addClass("hasActiveLinkList"),$("#articleContent").html($(data).find("#articleContent").html()).removeClass("hidden"),$("#loadingContent").hide();var scrollDiv=document.getElementsByClassName("mainPage")[0];if(scrollDiv.scrollHeight>scrollDiv.clientHeight){var activeLinkOffsetTop=$(".activeLink").offset().top-$(".mainPage").offset().top;activeLinkOffsetTop-scrollDiv.scrollTop+40>scrollDiv.clientHeight&&(scrollDiv.scrollTop=activeLinkOffsetTop-200)}for(var articleContentATags=$("#articleContent").find("a"),verArray=SearchVersion(),i=0;i<articleContentATags.length;i++)articleContentATags[i].onclick=function(){return addParam(this,verArray[0],"docContainer",needh3),!1};$("#AutoGenerateSidebar").length>0&&(GenerateContentByHead(needh3),$("#crumbs > ul").html($("#crumbs > ul > li").eq(0)),initCrumbs());var sd=$(window).scrollTop();if(sd>0&&window.scrollTo(0,sd>$("#overall-header").height()?$("#overall-header").height():sd),$(".markdown-body .sample-code-prefix").length>0&&getUrlVars(document.URL).lang){var langs=getUrlVars(document.URL).lang.toLowerCase().trim().split(",");langs&&(1==langs.length?sampleCodeSingleLangInit(langs[0]):sampleCodeLangsInit(langs))}else if($(".markdown-body .sample-code-prefix").length>0){$(".markdown-body .sample-code-prefix + blockquote > ul > li:first-child").addClass("on"),$(".markdown-body .sample-code-prefix + blockquote > ol > li:first-child").addClass("on");for(var template2Objs=$(".markdown-body .sample-code-prefix.template2 + blockquote"),i=0;i<template2Objs.length;i++)$(template2Objs[i]).find(">div").eq(0).addClass("on")}$("#articleContent").find("script").length>0&&(window.MathJax=null,window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},chtml:{scale:1}},(script=document.createElement("script")).src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js",script.async=!0,document.head.appendChild(script))}else{var bestVerIndex=-1,verDiff=-1,bestVersion=inputVer,historyList=$(data).find(".otherVersions"),redirectTag=aTag,matchSuccess=!1;if(null!=historyList){for(var listAry=historyList[0].getElementsByTagName("li"),i=0,curTag;i<listAry.length;i++){var tmpVerText=listAry[i].innerText,tmpVer=null,curTag;if((tmpVer="latest version"==tmpVerText?"latest":tmpVerText.replace("version ",""))==inputVer)return redirectTag=(curTag=$(listAry[i]).children("a"))[0],paramLink.indexOf("?")>0?paramLink=redirectTag.href+"?"+paramLink.split("?")[1]:paramLink.indexOf("#")>0&&(paramLink=redirectTag.href+"#"+paramLink.split("#")[1]),matchSuccess=!0,void RequestNewPage(aTag,paramLink,needh3,redirectTag.href);var tmpDiff=GetVersionDiff(inputVer,tmpVer);tmpDiff>=0&&(tmpDiff<verDiff||verDiff<0)&&(bestVerIndex=i,verDiff=tmpDiff,bestVersion=tmpVer)}if(bestVerIndex>=0&&!matchSuccess)return redirectTag=(curTag=$(listAry[bestVerIndex]).children("a"))[0],paramLink.indexOf("?")>0?paramLink=redirectTag.href+"?"+paramLink.split("?")[1]:paramLink.indexOf("#")>0&&(paramLink=redirectTag.href+"#"+paramLink.split("#")[1]),void RequestNewPage(aTag,paramLink,needh3,redirectTag.href);if(!matchSuccess)return void RequestNewPage(aTag,paramLink,needh3,aTag.href)}}}))}function findCurLinkOnFullTree(aTag,paramLink,needh3=!1){var fullTreeATags=$("#fullTreeMenuListContainer").find("a"),targetHref=aTag.href.toLowerCase();targetHref=targetHref.indexOf("?")>0?targetHref.split("?")[0]:targetHref.indexOf("#")>0?targetHref.split("#")[0]:targetHref;for(var i=0;i<fullTreeATags.length;i++)fullTreeATags[i].href&&fullTreeATags[i].href.toLowerCase()==targetHref&&RequestNewPage(fullTreeATags[i],paramLink,needh3)}function changeVersion(liTag){var innertext=liTag.innerText.toLowerCase(),ver=null;ver="latest version"==innertext?"latest":innertext.replace("version ","");var curUrl=document.URL,srcVal=getUrlVars(curUrl).src,anchorVar=void 0;-1!=curUrl.indexOf("#")&&(anchorVar=curUrl.split("#").pop()),-1!=curUrl.indexOf("?")&&(curUrl=curUrl.substring(0,curUrl.indexOf("?"))),-1!=curUrl.indexOf("#")&&(curUrl=curUrl.substring(0,curUrl.indexOf("#"))),curUrl=curUrl+"?ver="+ver+"&&cVer=true",null!=srcVal&&(curUrl=curUrl+"&&src="+srcVal),null!=anchorVar&&(curUrl=curUrl+"#"+anchorVar),window.location.href=curUrl}function findNearestVersion(ver){for(var versionList=$(".fullVersionInfo li"),bestVer=ver,verDiff=null,i=0;i<versionList.length;i++){var tempVer=$(versionList[i]).text().toLowerCase();if((tempVer="latest version"==tempVer?"latest":tempVer.replace("version ",""))==ver)return tempVer;var tmpDiff=GetVersionDiff(ver,tempVer);(null==verDiff||tmpDiff>=0&&(tmpDiff<verDiff||verDiff<0))&&(verDiff=tmpDiff,bestVer=tempVer)}return verDiff?bestVer:"latest"}